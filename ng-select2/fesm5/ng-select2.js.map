{"version":3,"file":"ng-select2.js.map","sources":["ng://ng-select2/lib/ng-select2.component.ts","ng://ng-select2/lib/ng-select2.module.ts"],"sourcesContent":["/// <reference types=\"select2\" />\r\nimport {\r\n  forwardRef,\r\n  AfterViewInit,\r\n  ChangeDetectionStrategy,\r\n  Component,\r\n  DoCheck,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  NgZone,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer,\r\n  SimpleChanges,\r\n  ViewChild,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\r\nimport { Options } from 'select2';\r\nimport { Select2OptionData } from './ng-select2.interface';\r\n\r\ndeclare var jQuery: any;\r\n\r\n@Component({\r\n  selector: 'ng-select2',\r\n  template: `<select #selector>\r\n  <ng-content select=\"option, optgroup\">\r\n  </ng-content>\r\n</select>\r\n`,\r\n  encapsulation: ViewEncapsulation.None,\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => NgSelect2Component),\r\n      multi: true,\r\n    },\r\n  ],\r\n})\r\nexport class NgSelect2Component implements AfterViewInit, OnChanges, OnDestroy, OnInit, DoCheck, ControlValueAccessor {\r\n  @ViewChild('selector') selector: ElementRef;\r\n\r\n  // data for select2 drop down\r\n  @Input() data: Array<Select2OptionData>;\r\n\r\n  // value for placeholder\r\n  @Input() placeholder = '';\r\n\r\n  @Input() dropdownParent = '';\r\n\r\n\r\n  @Input() allowClear = false;\r\n\r\n  // value for select2\r\n  @Input() value: string | string[];\r\n\r\n  // width of select2 input\r\n  @Input() width: string;\r\n\r\n  // enable / disable select2\r\n  @Input() disabled = false;\r\n\r\n  // all additional options\r\n  @Input() options: Options;\r\n\r\n  // emitter when value is changed\r\n  @Output() valueChanged = new EventEmitter();\r\n\r\n  private element: any = undefined;\r\n  private check = false;\r\n  // private style = `CSS`;\r\n\r\n  constructor(private renderer: Renderer, public zone: NgZone, public _element: ElementRef) {\r\n  }\r\n\r\n  ngDoCheck() {\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    // if (this.cssImport) {\r\n    //   const head = document.getElementsByTagName('head')[0];\r\n    //   const link: any = head.children[head.children.length - 1];\r\n\r\n    //   if (!link.version) {\r\n    //     const newLink = this.renderer.createElement(head, 'style');\r\n    //     this.renderer.setElementProperty(newLink, 'type', 'text/css');\r\n    //     this.renderer.setElementProperty(newLink, 'version', 'select2');\r\n    //     this.renderer.setElementProperty(newLink, 'innerHTML', this.style);\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n\r\n    if (!this.element) {\r\n      return;\r\n    }\r\n\r\n    if (changes['data'] && JSON.stringify(changes['data'].previousValue) !== JSON.stringify(changes['data'].currentValue)) {\r\n      this.initPlugin();\r\n      let newValue: string | string[];\r\n\r\n      if ((!this.allowClear && !this.options.allowClear) && changes['data'].currentValue.length === 1) {\r\n        newValue = changes['data'].currentValue[0].id;\r\n      } else {\r\n        newValue = this.value;\r\n      }\r\n\r\n      this.setElementValue(newValue);\r\n      this.propagateChange(newValue);\r\n    }\r\n\r\n    if (changes['value'] && changes['value'].previousValue !== changes['value'].currentValue) {\r\n\r\n      const newValue: string = changes['value'].currentValue;\r\n\r\n      this.setElementValue(newValue);\r\n      this.valueChanged.emit({\r\n        value: newValue,\r\n        data: this.element.select2('data'),\r\n      });\r\n      this.propagateChange(newValue);\r\n    }\r\n\r\n    if (changes['disabled'] && changes['disabled'].previousValue !== changes['disabled'].currentValue) {\r\n      this.renderer.setElementProperty(this.selector.nativeElement, 'disabled', this.disabled);\r\n    }\r\n\r\n    if (changes['placeholder'] && changes['placeholder'].previousValue !== changes['placeholder'].currentValue) {\r\n      this.renderer.setElementAttribute(this.selector.nativeElement, 'data-placeholder', this.placeholder);\r\n    }\r\n\r\n    if (changes['dropdownParent'] && changes['dropdownParent'].previousValue !== changes['dropdownParent'].currentValue) {\r\n      this.renderer.setElementAttribute(this.selector.nativeElement, 'data-dropdownParent', this.dropdownParent);\r\n    }\r\n\r\n    if (changes['allowClear'] && changes['allowClear'].previousValue !== changes['allowClear'].currentValue) {\r\n      this.renderer.setElementAttribute(this.selector.nativeElement, 'data-allow-clear', this.allowClear.toString());\r\n    }\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.element = jQuery(this.selector.nativeElement);\r\n    this.renderer.setElementAttribute(this.selector.nativeElement, 'data-placeholder', this.placeholder);\r\n    this.renderer.setElementAttribute(this.selector.nativeElement, 'data-dropdownParent', this.dropdownParent);\r\n    this.renderer.setElementAttribute(this.selector.nativeElement, 'data-allow-clear', this.allowClear.toString());\r\n    // console.log(this.selector.nativeElement);\r\n\r\n    this.initPlugin();\r\n\r\n    if (typeof this.value !== 'undefined') {\r\n      this.setElementValue(this.value);\r\n    }\r\n\r\n    this.element.on('select2:select select2:unselect', (e: any) => {\r\n      // const newValue: string = (e.type === 'select2:unselect') ? '' : this.element.val();\r\n      const newValue = this.element.val();\r\n\r\n      this.valueChanged.emit({\r\n        value: newValue,\r\n        data: this.element.select2('data'),\r\n      });\r\n      this.propagateChange(newValue);\r\n      this.setElementValue(newValue);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.element.off('select2:select');\r\n  }\r\n\r\n  private initPlugin() {\r\n    if (!this.element.select2) {\r\n      if (!this.check) {\r\n        this.check = true;\r\n        console.log('Please add Select2 library (js file) to the project.' +\r\n          'You can download it from https://github.com/select2/select2/tree/master/dist/js.');\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // If select2 already initialized remove him and remove all tags inside\r\n    if (this.element.hasClass('select2-hidden-accessible') === true) {\r\n      this.element.select2('destroy');\r\n      this.renderer.setElementProperty(this.selector.nativeElement, 'innerHTML', '');\r\n    }\r\n\r\n    let options: Options = {\r\n      data: this.data,\r\n      width: (this.width) ? this.width : 'resolve',\r\n    };\r\n\r\n    if (this.dropdownParent) {\r\n      options = {\r\n        data: this.data,\r\n        width: (this.width) ? this.width : 'resolve',\r\n        dropdownParent: jQuery('#' + this.dropdownParent),\r\n      };\r\n    }\r\n\r\n    // this.options.placeholder = '::SELECT::';\r\n    Object.assign(options, this.options);\r\n\r\n    if (options.matcher) {\r\n      jQuery.fn.select2.amd.require(['select2/compat/matcher'], (oldMatcher: any) => {\r\n        options.matcher = oldMatcher(options.matcher);\r\n        this.element.select2(options);\r\n\r\n        if (typeof this.value !== 'undefined') {\r\n          this.setElementValue(this.value);\r\n        }\r\n      });\r\n    } else {\r\n      this.element.select2(options);\r\n    }\r\n\r\n    this.renderer.setElementProperty(this.selector.nativeElement, 'disabled', this.disabled);\r\n  }\r\n\r\n  private setElementValue(newValue: string | string[]) {\r\n\r\n    // this.zone.run(() => {\r\n\r\n    if (Array.isArray(newValue)) {\r\n\r\n      for (const option of this.selector.nativeElement.options) {\r\n        this.renderer.setElementProperty(option, 'selected', (newValue.indexOf(option.value) > -1));\r\n      }\r\n    } else {\r\n      this.renderer.setElementProperty(this.selector.nativeElement, 'value', newValue);\r\n    }\r\n\r\n    if (this.element) {\r\n      this.element.trigger('change.select2');\r\n    }\r\n    // });\r\n  }\r\n\r\n\r\n  writeValue(value: any) {\r\n\r\n    if (value !== undefined) {\r\n      this.value = value;\r\n      this.setElementValue(value);\r\n    }\r\n  }\r\n\r\n  propagateChange = (value: any) => { };\r\n\r\n  registerOnChange(fn: any) {\r\n    this.propagateChange = fn;\r\n    this.valueChanged.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched() {\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\n\r\nimport { NgSelect2Component } from './ng-select2.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [NgSelect2Component],\r\n  exports: [NgSelect2Component]\r\n})\r\nexport class NgSelect2Module { }\r\n"],"names":["tslib_1.__values"],"mappings":"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"}
